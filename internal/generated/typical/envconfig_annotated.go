package typical

/* Autogenerated by Typical-Go. DO NOT EDIT.

TagName:
	@envconfig

Help:
	https://pkg.go.dev/github.com/typical-go/typical-rest-server/pkg/typcfg
*/

import (
	"fmt"

	"github.com/kelseyhightower/envconfig"
	"github.com/typical-go/typical-go/pkg/typapp"
	a "github.com/typical-go/typical-rest-server/internal/app/infra"
)

func init() {
	typapp.AppendCtor(
		&typapp.Constructor{Name: "", Fn: LoadAppCfg},
		&typapp.Constructor{Name: "", Fn: LoadRedisCfg},
		&typapp.Constructor{Name: "", Fn: LoadPostgresCfg},
		&typapp.Constructor{Name: "", Fn: LoadMySQLCfg},
	)
}

// LoadAppCfg load env to new instance of AppCfg
func LoadAppCfg() (*a.AppCfg, error) {
	var cfg a.AppCfg
	prefix := "APP"
	if err := envconfig.Process(prefix, &cfg); err != nil {
		return nil, fmt.Errorf("%s: %w", prefix, err)
	}
	return &cfg, nil
}

// LoadRedisCfg load env to new instance of RedisCfg
func LoadRedisCfg() (*a.RedisCfg, error) {
	var cfg a.RedisCfg
	prefix := "REDIS"
	if err := envconfig.Process(prefix, &cfg); err != nil {
		return nil, fmt.Errorf("%s: %w", prefix, err)
	}
	return &cfg, nil
}

// LoadPostgresCfg load env to new instance of PostgresCfg
func LoadPostgresCfg() (*a.PostgresCfg, error) {
	var cfg a.PostgresCfg
	prefix := "PG"
	if err := envconfig.Process(prefix, &cfg); err != nil {
		return nil, fmt.Errorf("%s: %w", prefix, err)
	}
	return &cfg, nil
}

// LoadMySQLCfg load env to new instance of MySQLCfg
func LoadMySQLCfg() (*a.MySQLCfg, error) {
	var cfg a.MySQLCfg
	prefix := "MYSQL"
	if err := envconfig.Process(prefix, &cfg); err != nil {
		return nil, fmt.Errorf("%s: %w", prefix, err)
	}
	return &cfg, nil
}
