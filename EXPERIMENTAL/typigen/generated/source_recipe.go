package generated

// SourceRecipe is source code recipe for generated.go in typical package
type SourceRecipe struct {
	PackageName     string
	Imports         map[string]string
	Structs         []StructPogo
	AddConstructors []FunctionPogo
}

func (r SourceRecipe) String() string {
	var builder Builder
	builder.Printlnf("// Autogenerated by Typical-Go. DO NOT EDIT!!\n")
	builder.Printlnf("package %s", r.PackageName)

	for packageName := range r.Imports {
		builder.Printlnf(`import %s "%s"`, r.Imports[packageName], packageName)
	}

	for _, stru := range r.Structs {
		builder.Printlnf("%s", stru)
	}

	builder.Printlnf("func init() {")
	for _, funcPogo := range r.AddConstructors {
		builder.Printlnf("Context.AddConstructor(%s)", funcPogo)
	}
	builder.Printlnf("}")

	return builder.String()
}
